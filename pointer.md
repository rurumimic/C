# 포인터

**메모리 주소**를 담는 **변수**

## 포인터 선언은 뒤에서부터 읽는다

**자료형** + **별표** + **변수 이름**

## 변수 종류

- **Global 전역**: 전체 파일에서 접근 가능, 런타임 동안, 정적/전역 메모리 할당
- **Static 정적**: 선언 함수에서 접근 가능, 런타임 동안, 정적/전역 메모리 할당
- **Automatic 자동**, **Local 지역**: 선언 함수에서 접근 가능, 함수 호출한 동안, 스택 메모리 할당
- **Dynamic 동적**: 포인터로 접근 가능, 메모리 해제 전까지, 힙 메모리 할당

## 별표 *

- 포인터 선언
- 두 수 곱하기
- 포인터 역참조

## 주소 연산자 &

변수의 주소를 반환한다.

```c
int num = 0;
int *pi = &num;

pi = num;        // 컴파일 에러
pi = (int *)num; // 캐스팅이 가능하다.
```

## 간접 지정 연산자 *

포인터 변수가 가리키는 위치의 **값 반환**

포인터 역참조: 참조 연산자로 포인터 값의 참조

```c
int num = 5;
int *pi = &num;
print("%d", *pi); // 포인터 변수 pi가 가리키는 정수 num의 값 5 반환

*pi = 200;        // 포인터 변수 pi가 가리키는 정수 num의 값을 200으로 지정
print("%d", *pi); // 200 반환
```

## 함수 포인터

```c
void (*foo)();
```

## void 포인터

- 모든 포인터 <-- 캐스팅 --> void 포인터
- 연산: 컴파일러 경고. 포인터의 주소는 1씩 증감.
- sizeof: 컴파일러 경고.
- void 타입 포인터: 일반적으로 4byte

## Null

- 널 개념: 널 포인터 상수에 의해 지원되는 추상적 개념
- 널 포인터 상수: 0일수도 아닐수도. 신경쓰지 않는다.
- NULL 매크로: `#define NULL ((void *)0)`, `0`
- NUL 아스키 문자: `byte 00000000`, `\0`
- 널 문자열: `""`
- 널 문장

## 전역, 정적 포인터

프로그램 시작 시 `NULL`로 초기화

## 사전 정의된 포인터 관련 데이터 타입

포인터 크기는 사용하는 장비와 컴파일러에 따라 다르다.

- size_t: 안전한 크기 타입. 객체의 최대 크기.
  - `typedef unsigned int size_t`
  - 부호 없는 정수 사용.
  - sizeof 연산자의 반환 타입
    - 포인터의 크기는 항상 sizeof 연산자로 구한다.
  - 출력: %zu 지정자, %u, %lu
  - 음수를 할당하면 안 된다.
- ptrdiff_t: 포인터 연산 처리. 포인터 주소 사이 차이 표현 용도. 배열 요소 순서 결정 용도.
- intptr_t: 포인터 주소 저장. 정수 표현.
- uintptr_t: 포인터 주소 저장. 부호 없는 정수 표현. 사용하기 불편하다. 캐스팅이 필요하다.

포인터를 정수로 캐스팅할 때 데이터 손실이 발생할 수 있으므로 주의한다.

## 포인터 연산자

- `*`: 선언, 역참조
- `->`: 구조체 멤버 접근
- `+`, `-`: 포인터 증감
- `==,` `!=`: 포인터 비교
- `>`, `>=`, `<`, `<=`: 포인터 비교
- `(데이터 타입)`: 캐스팅

**`포인터 값` `+/-` `정수`** == **`포인터 값` `+/-` `자료형 포인터 크기 * 정수`**

## 상수

데이터 보호 가능

```c
int num = 100;
const int limit = 999;

// 비상수를 가리키는 포인터
int * pi;

// 상수를 가리키는 포인터. 순서 상관 없다.
const int * pci;
int const * pci;

pci = &num; // 포인터 값은 변경 가능. 상수 정수, 비상수 정수 모두 할당 가능.
*pci = 500; // 구문 오류. 역참조 변경 x. 상수를 가리키고 있다고 판단해서 변경할 수 없다.

// 비상수를 가리키는 상수 포인터
int * const cpi = &num; // 선언 시 초기화

*cpi = 500; // 역참조 변경 가능
cpi = &date; // 오류. 포인터 값 변경 불가.
int * const cpi = &limit; // 컴파일러 경고. 포인터로 상수 정수의 값을 변경할 수 있다.

// 상수를 가리키는 상수 포인터. 거의 사용하지 않는다. 비상수 정수도 할당 할 수 있다.
const int * const cpci = &num; // 선언 시 초기화
int const * const cpci = &limit; // 선언 시 초기화

// 상수를 가리키는 상수 포인터를 가리키는 포인터
const int * const * pcpci = &cpci;

// 상수를 가리키는 상수 포인터를 가리키는 상수 포인터
const int * const * const cpcpci = &cpci;
```